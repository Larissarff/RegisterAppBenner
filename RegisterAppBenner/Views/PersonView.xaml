<UserControl x:Class="RegisterAppBenner.Views.PersonView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:viewModels="clr-namespace:RegisterAppBenner.ViewModels"
             mc:Ignorable="d" Height="845" Width="993">

    <UserControl.DataContext>
        <viewModels:PersonViewModel/>
    </UserControl.DataContext>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="244*"/>
            <RowDefinition Height="145*"/>
            <RowDefinition Height="99*"/>
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
            <Label Content="Filtrar por Nome:" Width="120" VerticalAlignment="Center"/>
            <TextBox Width="200" Margin="0 0 20 0"
                     Text="{Binding NameFilter, UpdateSourceTrigger=PropertyChanged}"/>

            <Label Content="Filtrar por CPF:" Width="100" VerticalAlignment="Center"/>
            <TextBox Width="150" Text="{Binding CpfFilter, UpdateSourceTrigger=PropertyChanged}"/>
        </StackPanel>

        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,10">
            <Label Content="Nome:" Width="60" VerticalAlignment="Center"/>
            <TextBox Width="200" Margin="0 0 20 0" Text="{Binding Name}"/>

            <Label Content="CPF:" Width="40" VerticalAlignment="Center"/>
            <TextBox Width="150" Margin="0 0 20 0" Text="{Binding Cpf}"/>

            <Label Content="Endereço:" Width="70" VerticalAlignment="Center"/>
            <TextBox Width="250" Text="{Binding Address}"/>
        </StackPanel>

        <StackPanel Grid.Row="2"
            Orientation="Horizontal"
            HorizontalAlignment="Left"
            VerticalAlignment="Top"
            Margin="0,5,0,0">

            <Button Content="Adicionar"
            Width="110" Height="35"
            Margin="0 0 10 0"
            Background="#4CAF50"
            Foreground="White"
            FontSize="14"
            Click="AddPerson_Click"/>

            <Button Content="Atualizar"
            Width="110" Height="35"
            Margin="0 0 10 0"
            Background="#FF9800"
            Foreground="White"
            FontSize="14"
            Click="UpdatePerson_Click"/>

            <Button Content="Excluir"
            Width="110" Height="35"
            Margin="0 0 10 0"
            Background="#F44336"
            Foreground="White"
            FontSize="14"
            Click="DeletePerson_Click"/>

            <Button Content="Incluir Pedido"
            Width="160" Height="35"
            Background="#0078D7"
            Foreground="White"
            FontSize="14"
            Click="AddOrder_Click"/>
        </StackPanel>

        <DataGrid Grid.Row="2"
          ItemsSource="{Binding People}"
          SelectedItem="{Binding SelectedPerson, Mode=TwoWay}"
          AutoGenerateColumns="False"
          CanUserAddRows="False"
          CanUserDeleteRows="False"
          IsReadOnly="False"
          Margin="0,96,0,70"
          Height="200"
          CellEditEnding="DataGrid_CellEditEnding">

            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50" IsReadOnly="True"/>
                <DataGridTextColumn Header="Nome" Binding="{Binding Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="200"/>
                <DataGridTextColumn Header="CPF" Binding="{Binding Cpf, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="150"/>
                <DataGridTextColumn Header="Endereço" Binding="{Binding Address, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="250"/>
            </DataGrid.Columns>
        </DataGrid>

        <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="6,331,-6,205" Grid.RowSpan="2">
            <Label Content="Filtrar por Status do Pedido:" Width="181" VerticalAlignment="Center"/>
            <TextBox Width="210"
                Text="{Binding StatusOrderFilter, UpdateSourceTrigger=PropertyChanged}" RenderTransformOrigin="0.53,0.482" Height="28"
             />
        </StackPanel>

        <GroupBox Header="Pedidos do Cliente" Grid.Row="3" Margin="3,0,-3,25" RenderTransformOrigin="0.513,0.138" Grid.RowSpan="2" Height="309" VerticalAlignment="Bottom">
            <DataGrid ItemsSource="{Binding PersonOrders}"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      IsReadOnly="True"
                      Margin="10,0,0,0" Height="202">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Data da Venda" Binding="{Binding SaleDate, StringFormat=dd/MM/yyyy}" Width="150"/>
                    <DataGridTextColumn Header="Valor Total (R$)" Binding="{Binding TotalValue, StringFormat=N2}" Width="150"/>
                    <DataGridTextColumn Header="Forma de Pagamento" Binding="{Binding PaymentMethod}" Width="150"/>
                    <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="150"/>
                    <DataGridTemplateColumn Header="Ações">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <Button Content="Pago" Width="60" Margin="2" Background="#4CAF50" Foreground="White"
                                            Command="{x:Null}" Click="MarkAsPaid_Click"/>
                                    <Button Content="Enviado" Width="70" Margin="2" Background="#FF9800" Foreground="White"
                                            Command="{x:Null}" Click="MarkAsShipped_Click"/>
                                    <Button Content="Recebido" Width="80" Margin="2" Background="#0078D7" Foreground="White"
                                            Command="{x:Null}" Click="MarkAsDelivered_Click"/>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </GroupBox>
        <Label Content="Para atualizar qualquer campo, clique 2x sobre ele &#xD;&#xA;e selcione toda a linha e clique em &quot;Atualizar&quot;" Margin="627,11,10,301" Grid.Row="2" RenderTransformOrigin="0.5,0.5">
            <Label.RenderTransform>
                <TransformGroup>
                    <ScaleTransform/>
                    <SkewTransform/>
                    <RotateTransform Angle="0.033"/>
                    <TranslateTransform/>
                </TransformGroup>
            </Label.RenderTransform>
        </Label>
    </Grid>
</UserControl>
